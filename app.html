<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>登入｜Soul Builder Web App（Beta）</title>
  <meta name="description" content="Soul Builder Web App 偽啟動器登入頁。加入試用名單或進入 Web App。" />
  <meta name="theme-color" content="#0b1020" />
  <link rel="stylesheet" href="style.css" />
  <style>
    /* ===== Page: App (Login Launcher) ===== */
    body.page-app{ min-height:100vh; }
    body.page-app .topbar{ position:relative; z-index:6; }

    /* Fullscreen video background */
    body.page-app .loginBg{
      position:fixed; inset:0; z-index:0;
      background:#000;
    }
    body.page-app .loginBg video{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      opacity:.80;
      filter:saturate(1.05) contrast(1.05);
    }
    body.page-app .loginBg::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 520px at 20% 15%, rgba(122,162,255,.18), transparent 60%),
        radial-gradient(900px 520px at 90% 75%, rgba(157,123,255,.14), transparent 60%),
        linear-gradient(180deg, rgba(11,16,32,.48), rgba(11,16,32,.82) 55%, rgba(11,16,32,.94));
    }

    /* Center stage */
    body.page-app main{ position:relative; z-index:5; }
    body.page-app .stage{
      min-height:calc(100vh - 76px);
      display:grid;
      place-items:center;
      padding:26px 0 46px;
    }
    body.page-app .loginCard{
      width:min(520px, calc(100vw - 32px));
      border-radius:var(--radius2);
      border:1px solid rgba(255,255,255,.14);
      background:rgba(11,16,32,.55);
      backdrop-filter: blur(14px);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    body.page-app .loginCard__head{
      padding:18px 18px 14px;
      border-bottom:1px solid rgba(255,255,255,.10);
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
    }
    body.page-app .loginTitle{
      font-size:18px;
      font-weight:900;
      margin:0;
      letter-spacing:.2px;
    }
    body.page-app .loginSub{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.55;
    }
    body.page-app .betaRow{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-top:12px;
    }
    body.page-app .betaBadge{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.04);
      color:var(--muted);
      font-size:12px; font-weight:900;
      white-space:nowrap;
    }
    body.page-app .betaDot{
      width:8px; height:8px; border-radius:999px;
      background:linear-gradient(135deg, rgba(122,162,255,.95), rgba(157,123,255,.95));
      box-shadow:0 0 0 4px rgba(122,162,255,.12);
    }
    body.page-app .safeNote{
      color:var(--muted2);
      font-size:12px;
      text-align:right;
      line-height:1.4;
    }

    body.page-app .loginCard__body{ padding:16px 18px 18px; }
    body.page-app .field{ margin-top:12px; }
    body.page-app .field label{
      display:block;
      margin:0 0 6px;
      font-size:12px;
      color:var(--muted);
      letter-spacing:.2px;
    }
    body.page-app .field input{
      width:100%;
      height:44px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.03);
      color:var(--txt);
      padding:0 14px;
      outline:none;
    }
    body.page-app .field input:focus{
      border-color:rgba(122,162,255,.65);
      box-shadow:0 0 0 4px rgba(122,162,255,.12);
    }
    body.page-app .pwRow{ position:relative; }
    body.page-app .pwToggle{
      position:absolute;
      right:10px;
      top:50%;
      transform:translateY(-50%);
      height:30px;
      padding:0 10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(11,16,32,.35);
      color:var(--muted);
      font-weight:900;
      font-size:12px;
      cursor:pointer;
    }
    body.page-app .rowBetween{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-top:12px;
      color:var(--muted2);
      font-size:12px;
    }
    body.page-app .rowBetween a{ color:var(--muted); text-decoration:none; }
    body.page-app .rowBetween a:hover{ text-decoration:underline; }

    body.page-app .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
    }
    body.page-app .actions .btn{ flex:1 1 180px; min-height:44px; }
    body.page-app .tiny{
      margin-top:12px;
      color:var(--muted2);
      font-size:12px;
      line-height:1.6;
    }
    body.page-app .tiny code{ opacity:.9; }

    /* Fake launcher overlay */
    body.page-app .overlay{
      position:fixed; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      z-index:20;
      background:rgba(0,0,0,.62);
      backdrop-filter: blur(10px);
      padding:18px;
    }
    body.page-app .overlay.isOn{ display:flex; }
    body.page-app .launcher{
      width:min(860px, 100%);
      border-radius:var(--radius2);
      border:1px solid rgba(255,255,255,.14);
      background:rgba(11,16,32,.72);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    body.page-app .launcher__head{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
    }
    body.page-app .launcher__title{ font-weight:900; }
    body.page-app .tiles{
      padding:16px;
      display:grid;
      grid-template-columns:repeat(3, minmax(0, 1fr));
      gap:12px;
    }
    body.page-app .tile{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      padding:14px;
    }
    body.page-app .tile h3{ margin:0 0 6px; font-size:15px; }
    body.page-app .tile p{ margin:0; color:var(--muted); font-size:13px; line-height:1.55; }
    body.page-app .launcher__foot{
      padding:14px 16px;
      border-top:1px solid rgba(255,255,255,.10);
      display:flex;
      gap:10px;
      justify-content:flex-end;
      flex-wrap:wrap;
    }
    @media (max-width: 860px){
      body.page-app .tiles{ grid-template-columns:1fr; }
    }

    /* Loading micro-state */
    body.page-app .btn[aria-busy="true"]{ opacity:.85; pointer-events:none; }
    body.page-app .btn .spin{
      width:14px; height:14px;
      border-radius:999px;
      border:2px solid rgba(255,255,255,.25);
      border-top-color:rgba(255,255,255,.9);
      display:inline-block;
      vertical-align:-2px;
      margin-right:8px;
      animation:sp 1s linear infinite;
    }
    @keyframes sp{ to{ transform:rotate(360deg); } }
  
    /* Audio controls */
    body.page-app input[type="range"]{
      accent-color: rgba(122,162,255,.85);
      height: 2px;
      background: transparent;
    }
    body.page-app input[type="range"]::-webkit-slider-runnable-track{
      height: 4px;
      border-radius: 999px;
      background: rgba(255,255,255,.16);
    }
    body.page-app input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance: none;
      width: 14px; height: 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.92);
      margin-top: -5px;
      box-shadow: 0 0 0 4px rgba(122,162,255,.14);
    }
  </style>
</head>

<body class="page-app">
  <div class="loginBg" aria-hidden="true">
    <video src="等待.mp4" autoplay muted loop playsinline preload="metadata"></video>
  </div>

  <canvas id="bgParticles" aria-hidden="true"></canvas>
  <div class="bgBlobs" aria-hidden="true">
    <span class="blob b1"></span>
    <span class="blob b2"></span>
    <span class="blob b3"></span>
  </div>

  <header class="topbar" id="top">
    <div class="container topbar__inner">
      <a class="brand" href="index.html">
        <span class="brand__mark">智動</span>
        <span class="brand__name">智動科技</span>
        <span class="brand__en">SMARTMOTION_ROBOTICS</span>
      </a>

      <nav class="nav">
        <a href="soul-builder.html">Soul Builder</a>
        <a href="trust.html">我們的界線</a>
        <a href="film.html">廣告播放</a>
      </nav>

      <div class="topbar__cta">
        <a class="btn btn--ghost" href="soul-builder.html#cta">加入試用</a>
      </div>

      <button class="hamburger" aria-label="開啟選單" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </div>

    <div class="mobileNav" aria-hidden="true">
      <a href="soul-builder.html">Soul Builder</a>
      <a href="trust.html">我們的界線</a>
      <a href="film.html">廣告播放</a>
      <a class="btn btn--primary" href="soul-builder.html#cta">加入試用</a>
    </div>
  </header>

  <main>
    <section class="stage container">
      <div class="loginCard reveal">
        <div class="loginCard__head">
          <p class="eyebrow">Web App · 啟動器 <span class="badge" style="margin-left:8px;">Beta</span></p>
          <h1 class="loginTitle">登入 Soul Builder</h1>
          <p class="loginSub">你可以先登入體驗流程，再決定是否加入試用。</p>

          <div class="betaRow">
            <div class="betaBadge"><span class="betaDot"></span> BETA ACCESS</div>
            <div class="safeNote">界線可控 · 可退出 · 可重設</div>
          </div>
        
          <div class="rowBetween" style="margin-top:12px;">
            <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
              <button class="btn btn--ghost" id="audioBtn" type="button" style="min-height:38px;padding:0 12px;">
                啟用背景音訊
              </button>
              <span id="audioState" style="color:var(--muted2);font-size:12px;">目前靜音（瀏覽器限制自動播放聲音）</span>
            </div>
            <div style="display:flex;align-items:center;gap:8px;">
              <span style="color:var(--muted2);font-size:12px;">音量</span>
              <input id="audioVol" type="range" min="0" max="1" step="0.05" value="0.6" style="width:140px;" />
            </div>
          </div>
</div>

        <div class="loginCard__body">
          <form id="loginForm" autocomplete="on">
            <div class="field">
              <label for="account">帳號 / Email</label>
              <input id="account" name="account" type="text" placeholder="name@example.com" required />
            </div>

            <div class="field pwRow">
              <label for="password">密碼</label>
              <input id="password" name="password" type="password" placeholder="••••••••" required />
              <button class="pwToggle" id="pwToggle" type="button" aria-pressed="false">顯示</button>
            </div>

            <div class="rowBetween">
              <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                <input type="checkbox" id="remember" style="accent-color: rgba(122,162,255,.85);" />
                記住我（本機）
              </label>
              <a href="#" id="forgotLink">忘記密碼</a>
            </div>

            <div class="actions">
              <button class="btn btn--primary magnet" id="loginBtn" type="submit">
                登入（模擬）
              </button>
              <button class="btn btn--ghost" id="guestBtn" type="button">
                以訪客模式啟動
              </button>
            </div>

            <div class="tiny">
              提示：這是「啟動器」頁面。提交後會顯示一個簡易啟動面板，用來模擬進入 App 的節奏。<br />
              
            </div>

            <div class="formMsg" id="loginMsg" aria-live="polite" style="margin-top:12px;"></div>
          </form>
        </div>
      </div>
    </section>

    <footer class="footer" style="position:relative; z-index:5;">
      <div class="container footer__inner">
        <div class="footer__left">
          <div class="footer__brand">智動科技 SMARTMOTION_ROBOTICS</div>
          <div class="footer__desc">App Launcher（Demo）｜隱私與界線優先</div>
        </div>
        <div class="footer__right">
          <a href="trust.html">界線</a>
          <span class="sep">·</span>
          <a href="soul-builder.html">Soul Builder</a>
          <span class="sep">·</span>
          <a href="index.html">回官網</a>
        </div>
      </div>
    </footer>
  </main>

  <!-- Fake launcher overlay -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="launcher" role="document">
      <div class="launcher__head">
        <div>
          <div class="launcher__title">Soul Builder · 啟動面板（Demo）</div>
          <div class="gateSub" id="sessionLabel">Session: -</div>
        </div>
        <button class="btn btn--ghost" id="closeOverlay" type="button">關閉</button>
      </div>

      <div class="tiles">
        <div class="tile">
          <h3>Start</h3>
          <p>以最少步驟開始互動。你的節奏由你決定。</p>
        </div>
        <div class="tile">
          <h3>Boundaries</h3>
          <p>先把話題範圍與互動深度設好，降低社交壓力。</p>
        </div>
        <div class="tile">
          <h3>Privacy</h3>
          <p>資料用途與權限清楚透明；可退出、可重設。</p>
        </div>
      </div>

      <div class="launcher__foot">
        <a class="btn btn--ghost" href="trust.html">先看界線</a>
        <a class="btn btn--primary magnet" href="Web_App.html" id="goApp">進入 Web App</a>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    (function(){
      const $ = (s, el=document) => el.querySelector(s);

      const form = $("#loginForm");

      const bgVideo = document.querySelector(".loginBg video");
      const audioBtn = $("#audioBtn");
      const audioState = $("#audioState");
      const audioVol = $("#audioVol");
      const account = $("#account");
      const password = $("#password");
      const remember = $("#remember");
      const msg = $("#loginMsg");
      const btn = $("#loginBtn");
      const guestBtn = $("#guestBtn");
      const pwToggle = $("#pwToggle");
      const forgot = $("#forgotLink");

      const overlay = $("#overlay");
      const closeOverlay = $("#closeOverlay");
      const sessionLabel = $("#sessionLabel");

      // Restore
      try {
        const saved = localStorage.getItem("sb_account");
        const rem = localStorage.getItem("sb_remember") === "1";
        if(saved) account.value = saved;
        remember.checked = rem;
      } catch(e){}

      
      // Background audio: browsers block autoplay with sound. Enable on user gesture.
      const setAudioState = (on) => {
        if(!audioState) return;
        audioState.textContent = on ? "背景音訊已啟用" : "目前靜音（瀏覽器限制自動播放聲音）";
      };

      if(bgVideo){
        bgVideo.volume = 0.6;
      }
      if(audioVol && bgVideo){
        audioVol.addEventListener("input", () => {
          bgVideo.volume = Number(audioVol.value);
        });
      }
      if(audioBtn && bgVideo){
        audioBtn.addEventListener("click", async () => {
          const on = audioBtn.dataset.on === "1";
          if(on){
            bgVideo.muted = true;
            audioBtn.dataset.on = "0";
            audioBtn.textContent = "啟用背景音訊";
            setAudioState(false);
            return;
          }
          try{
            bgVideo.muted = false;
            bgVideo.volume = Number(audioVol ? audioVol.value : 0.6);
            await bgVideo.play();
            audioBtn.dataset.on = "1";
            audioBtn.textContent = "關閉背景音訊";
            setAudioState(true);
          }catch(err){
            // still blocked
            bgVideo.muted = true;
            audioBtn.dataset.on = "0";
            audioBtn.textContent = "啟用背景音訊";
            setAudioState(false);
          }
        });
      }

      pwToggle.addEventListener("click", () => {
        const on = password.type === "password";
        password.type = on ? "text" : "password";
        pwToggle.textContent = on ? "隱藏" : "顯示";
        pwToggle.setAttribute("aria-pressed", String(on));
      });

      forgot.addEventListener("click", (e) => {
        e.preventDefault();
        msg.textContent = "此為 Demo 登入頁：請改以「加入試用名單」取得 Beta 開通通知。";
      });

      const setBusy = (busy) => {
        btn.setAttribute("aria-busy", String(busy));
        btn.innerHTML = busy ? '<span class="spin" aria-hidden="true"></span>啟動中…' : '登入（模擬）';
      };

      const openLauncher = (label) => {
        sessionLabel.textContent = "Session: " + label;
        overlay.classList.add("isOn");
        overlay.setAttribute("aria-hidden", "false");
        document.body.style.overflow = "hidden";
      };

      const closeLauncher = () => {
        overlay.classList.remove("isOn");
        overlay.setAttribute("aria-hidden", "true");
        document.body.style.overflow = "";
      };

      closeOverlay.addEventListener("click", closeLauncher);
      overlay.addEventListener("click", (e) => {
        if(e.target === overlay) closeLauncher();
      });
      document.addEventListener("keydown", (e) => {
        if(e.key === "Escape" && overlay.classList.contains("isOn")) closeLauncher();
      });

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        msg.textContent = "";
        setBusy(true);

        // remember local (demo)
        try {
          if(remember.checked) {
            localStorage.setItem("sb_account", account.value.trim());
            localStorage.setItem("sb_remember", "1");
          } else {
            localStorage.removeItem("sb_account");
            localStorage.setItem("sb_remember", "0");
          }
        } catch(e){}

        // fake auth delay
        setTimeout(() => {
          setBusy(false);
          msg.textContent = "登入成功（Demo）。已為你開啟啟動面板。";
          openLauncher(account.value.trim() || "demo-user");
        }, 950);
      });

      guestBtn.addEventListener("click", () => {
        msg.textContent = "已以訪客模式啟動（Demo）。";
        openLauncher("guest");
      });
    })();
  </script>
</body>
</html>
